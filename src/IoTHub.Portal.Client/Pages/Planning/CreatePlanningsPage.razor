@page "/planning/new"
@inherits AuthorizedComponentBase

@attribute [Authorize]

<AuthorizedContent IsLoading="@IsLoading" IsAuthorized="@IsAuthorized">
    <EditPlanning Planning=@Planning ScheduleList=@ScheduleList Mode="New" />
</AuthorizedContent>

@code {
    // Specify which permissions are required for this page
    protected override PortalPermissions[] RequiredPermissions { get; } = { PortalPermissions.PlanningWrite };

    public List<ScheduleDto> ScheduleList { get; set; } = new() { };
    public PlanningDto Planning { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        Planning.DayOff = DaysEnumFlag.DaysOfWeek.Saturday | DaysEnumFlag.DaysOfWeek.Sunday;
        ScheduleList.Add(new ScheduleDto { Start = "00:00" });
    }
}
