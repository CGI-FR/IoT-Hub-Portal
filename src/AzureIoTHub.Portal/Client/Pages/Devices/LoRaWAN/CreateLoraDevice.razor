@using AzureIoTHub.Portal.Client.Validators
@using AzureIoTHub.Portal.Models.v10.LoRaWAN
@using AzureIoTHub.Portal.Models.v10

<MudExpansionPanels MultiExpansion="true">
    <MudGrid>
        <MudItem xs="12">
            <MudExpansionPanel Text="LoRaWAN" IsInitiallyExpanded="true">
                <TitleContent><MudText Typo="Typo.h6">LoraWAN</MudText></TitleContent>
                <ChildContent>
                    <MudGrid>
                        @if (loraModel.UseOTAA)
                        {
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@LoRaDevice.AppEUI"
                                          Label="OTAA AppEUI"
                                          Variant="Variant.Outlined"
                                          For="@(()=> LoRaDevice.AppEUI)"
                                          ReadOnly="true"
                                          Required="true"
                                          HelperText="OTAA AppEUI is automatically set from the selected model" />
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@LoRaDevice.AppKey"
                                          Label="OTAA AppKey"
                                          For="@(() => LoRaDevice.AppKey)"
                                          Required="true"
                                          Variant="Variant.Outlined" />
                            </MudItem>
                        }
                        else
                        {
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@LoRaDevice.AppSKey" Label="ABP App SKey" For="@(() => LoRaDevice.AppSKey)" Variant="Variant.Outlined" Required="true"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@LoRaDevice.NwkSKey" Label="ABP Nwk SKey" For="@(() => LoRaDevice.NwkSKey)" Variant="Variant.Outlined" Required="true"></MudTextField>
                            </MudItem>
                            <MudItem xs="12" md="6">
                                <MudTextField @bind-Value="@LoRaDevice.DevAddr" Label="DevAddr" For="@(() => LoRaDevice.DevAddr)" Variant="Variant.Outlined" Required="true"></MudTextField>
                            </MudItem>
                        }
                    </MudGrid>
                </ChildContent>
            </MudExpansionPanel>
        </MudItem>
    </MudGrid>
</MudExpansionPanels>

@code {
    [Parameter]
    public LoRaDeviceDetails LoRaDevice { get; set; }

    [Parameter]
    public LoRaDeviceDetailsValidator LoraValidator { get; set; }

    [Parameter]
    public LoRaDeviceModel loraModel { get; set; }

}
